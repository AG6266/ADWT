Slip 12
Q1)
<!DOCTYPE html>
<html lang=”en”>
<head>
<meta charset=”UTF-8”>
<meta name=”viewport” content=”width=device-width, initial-scale=1.0”>
<title>Customer Registration Form</title>
<style>
Body {
Font-family: Arial, sans-serif;
Background-color: #f4f4f4;
Margin: 0;
Padding: 20px;
}
Form {
Max-width: 600px;
Margin: auto;
Background-color: #fff;
Padding: 20px;
Border-radius: 8px;
Box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}
Label {
Display: block;
Margin-bottom: 8px;
Font-weight: bold;
}
Input, select, textarea {
Width: 100%;
Padding: 8px;
Margin-bottom: 16px;
Box-sizing: border-box;
Border: 1px solid #ccc;
Border-radius: 4px;
}
Textarea {
Resize: vertical;
Height: 100px;
}
Button {
Background-color: #4caf50;
Color: #fff;
Padding: 10px 15px;
Border: none;
Border-radius: 4px;
Cursor: pointer;
}
Button[type=”reset”] {
Background-color: #f44336;
}
</style>
</head>
<body>
<form id=”customerRegistrationForm”>
<label for=”name”>Name:</label>
<input type=”text” id=”name” name=”name” required>
<label for=”contactNo”>Contact Number:</label>
<input type=”tel” id=”contactNo” name=”contactNo” pattern=”[0-9]{10}” required>
<small>Enter a 10-digit phone number.</small>
<label for=”gender”>Gender:</label>
<select id=”gender” name=”gender” required>
<option value=”male”>Male</option>
<option value=”female”>Female</option>
<option value=”other”>Other</option>
</select>
<label for=”preferredDays”>Preferred Days of Purchasing:</label>
<input type=”text” id=”preferredDays” name=”preferredDays”>
<label for=”favoriteItem”>Favorite Item:</label>
<select id=”favoriteItem” name=”favoriteItem”>
<option value=”clothing”>Clothing</option>
<option value=”electronics”>Electronics</option>
<option value=”homeAppliances”>Home Appliances</option>
<option value=”groceries”>Groceries</option>
</select>
<label for=”suggestions”>Suggestions:</label>
<textarea id=”suggestions” name=”suggestions”></textarea>
<button type=”submit”>Submit</button>
<button type=”reset”>Reset</button>
</form>
</body>
</html>
Q2)


db.createCollection("actors")
db.createCollection("producers")
db.createCollection("movies")

db.actors.insertMany([
  { _id: 1, name: "Akshay", dob: ISODate("1967-09-09"), nationality: "Indian" },
  { _id: 2, name: "Salman", dob: ISODate("1965-12-27"), nationality: "Indian" },
  { _id: 3, name: "Katrina", dob: ISODate("1983-07-16"), nationality: "British-Indian" },
  { _id: 4, name: "Ranbir", dob: ISODate("1982-09-28"), nationality: "Indian" },
  { _id: 5, name: "Deepika", dob: ISODate("1986-01-05"), nationality: "Indian" }
])


db.producers.insertMany([
  { _id: 101, name: "Karan Johar", company: "Dharma Productions", country: "India" },
  { _id: 102, name: "Aditya Chopra", company: "YRF", country: "India" },
  { _id: 103, name: "Sajid Nadiadwala", company: "NGE", country: "India" },
  { _id: 104, name: "Rohit Shetty", company: "RS Films", country: "India" },
  { _id: 105, name: "Farhan Akhtar", company: "Excel Entertainment", country: "India" }
])

db.movies.insertMany([
  {
    _id: 201,
    title: "Action Blast",
    release_year: 2023,
    budget: 200,
    producers: [101, 103],
    cast: [
      { actor_id: 1, role: "Hero" },
      { actor_id: 3, role: "Heroine" }
    ]
  },
  {
    _id: 202,
    title: "Romantic Saga",
    release_year: 2023,
    budget: 150,
    producers: [102],
    cast: [
      { actor_id: 2, role: "Hero" },
      { actor_id: 5, role: "Heroine" }
    ]
  },
  {
    _id: 203,
    title: "Comedy Nights",
    release_year: 2024,
    budget: 180,
    producers: [104, 105],
    cast: [
      { actor_id: 1, role: "Comedian" },
      { actor_id: 4, role: "Friend" }
    ]
  },
  {
    _id: 204,
    title: "Thriller Chase",
    release_year: 2024,
    budget: 220,
    producers: [101],
    cast: [
      { actor_id: 3, role: "Detective" },
      { actor_id: 5, role: "Villain" }
    ]
  },
  {
    _id: 205,
    title: "Family Drama",
    release_year: 2023,
    budget: 220,
    producers: [102, 103],
    cast: [
      { actor_id: 1, role: "Father" },
      { actor_id: 2, role: "Son" },
      { actor_id: 5, role: "Mother" }
    ]
  }
])





a. List the names of movies with the highest budget:
db.movies.find(
  { budget: db.movies.find().sort({ budget: -1 }).limit(1).toArray()[0].budget },
  { title: 1, _id: 0 }
)


b. Display the details of producers who have produced more than one movie in a year:
db.movies.aggregate([
  { $unwind: "$producers" },
  { $group: { _id: { producer: "$producers", year: "$release_year" }, movie_count: { $sum: 1 } } },
  { $match: { movie_count: { $gt: 1 } } },
  { $lookup: {
      from: "producers",
      localField: "_id.producer",
      foreignField: "_id",
      as: "producer_details"
  }},
  { $unwind: "$producer_details" },
  { $project: { _id: 0, producer: "$producer_details.name", year: "$_id.year", movies_produced: "$movie_count" } }
])


c. List the names of actors who have acted in at least one movie in which ‘Akshay’ has acted:
// Step 1:Find movies where Akshay (actor_id: 1) acted
const akshayMovies = db.movies.find({ "cast.actor_id": 1 }, { _id: 1 }).toArray().map(m => m._id)

// Step 2: Find all actors in those movies (excluding Akshay)
db.movies.aggregate([
  { $match: { _id: { $in: akshayMovies } } },
  { $unwind: "$cast" },
  { $match: { "cast.actor_id": { $ne: 1 } } },
  { $lookup: {
      from: "actors",
      localField: "cast.actor_id",
      foreignField: "_id",
      as: "actor_details"
  }},
  { $unwind: "$actor_details" },
  { $group: { _id: "$actor_details.name" } }
])


d. List the names of movies produced by more than one producer:
db.movies.find(
  { $expr: { $gt: [ { $size: "$producers" }, 1 ] } },
  { title: 1, _id: 0 }
)
